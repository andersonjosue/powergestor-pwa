<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <title>PowerGestor PWA</title>
</head>
<body>
  <div class="tabs">
    <div class="tab-header">
      <button class="tab-btn active" data-tab="aba1">PowerGestor</button>
      <button class="reload-btn" data-target="aba1">ðŸ”„</button>
    </div>
    <div class="tab-header">
      <button class="tab-btn" data-tab="aba2">Analytics</button>
      <button class="reload-btn" data-target="aba2">ðŸ”„</button>
    </div>
    <div class="tab-header">
      <button class="tab-btn" data-tab="aba3">PDV</button>
      <button class="reload-btn" data-target="aba3">ðŸ”„</button>
    </div>
  </div>

  <div class="tab-content active" id="aba1">
    <iframe src="https://app.powergestor.com/" frameborder="0"></iframe>
  </div>
  <div class="tab-content" id="aba2">
    <iframe src="https://app.powergestor.com/analytics/" frameborder="0"></iframe>
  </div>
  <div class="tab-content" id="aba3">
    <iframe src="https://app.powergestor.com/pdv/" frameborder="0"></iframe>
  </div>

  <script>
    document.querySelectorAll(".tab-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const target = btn.dataset.tab;
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));

        btn.classList.add("active");
        document.getElementById(target).classList.add("active");
      });
    });

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }

    document.querySelectorAll(".reload-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const tabId = btn.dataset.target;
        const iframe = document.querySelector(`#${tabId} iframe`);
        if (iframe) {
          const src = iframe.src;
          iframe.src = ""; // forÃ§a o reload limpando e colocando de volta
          setTimeout(() => {
            iframe.src = src;
          }, 50);
        }
      });
    });
  </script>
  
</body>
</html>